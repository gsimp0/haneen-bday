<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Moments</title>

  <!-- Use the SAME stylesheet as the rest of your site -->
  <link rel="stylesheet" href="css/styles.css?v=4">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Same nav as your other pages -->
  <nav class="nav">
    <div class="brand">04/03/2026</div>
    <div class="links">
      <a href="index.html">Home</a>
      <a href="letters.html">Letters</a>
      <a href="game.html">Game</a>
      <a href="photos.html">Photos</a>
      <a class="active" href="moments.html">Moments</a>
    </div>
  </nav>

  <main class="page">
    <div class="container">
      <h1 class="page-title">Moments</h1>

      <!-- Reuse the photos grid layout, but with floating text items -->
      <div id="momentsGrid" class="gallery"></div>
    </div>
  </main>

  <!-- Reuse your existing modal styling from styles.css -->
  <div class="modal-backdrop" id="backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="top">
        <h2 id="modalTitle"></h2>
        <button class="btn" id="closeBtn" type="button">Close</button>
      </div>

      <!-- optional photo area -->
      <div id="modalExtra" style="margin-top:12px;"></div>

      <p id="modalBody"></p>
    </div>
  </div>

  <script>
    // Put photos in /assets/photos/ and set photo filename if you want one.
    const moments = [
      {
        date: "14/02/2024",
        time: "3:12pm",
        title: "Elephant Rocks",
        text: "We visited Elephant Rocks.\nYou walked ahead like you knew I was there.\nI remember thinking: this is what safety feels like.",
        photo: "elephant-rocks.jpg"
      },
      {
        date: "02/11/2023",
        time: "9:48pm",
        title: "Kitchen light",
        text: "You were cooking and humming under your breath.\nI leaned on the doorway and watched.\nEverything felt quiet and certain.",
        photo: ""
      }
    ];

    const grid = document.getElementById("momentsGrid");
    const backdrop = document.getElementById("backdrop");
    const closeBtn = document.getElementById("closeBtn");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const modalExtra = document.getElementById("modalExtra");

    function openMoment(m){
      modalTitle.textContent = (m.title || "Moment");
      modalBody.textContent = (m.text || "");

      modalExtra.innerHTML = "";
      if (m.photo){
        const img = document.createElement("img");
        img.src = `assets/photos/${m.photo}`;
        img.alt = m.title || "Photo";
        img.style.width = "100%";
        img.style.borderRadius = "14px";
        img.style.display = "block";
        img.onerror = () => {
          modalExtra.innerHTML = `<p style="margin:0;color:var(--muted);">Photo not found: assets/photos/${m.photo}</p>`;
        };
        modalExtra.appendChild(img);
      }

      backdrop.style.display = "flex";
      document.body.style.overflow = "hidden";
    }

    function closeModal(){
      backdrop.style.display = "none";
      document.body.style.overflow = "";
    }

    closeBtn.addEventListener("click", closeModal);
    backdrop.addEventListener("click", (e) => { if (e.target === backdrop) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape" && backdrop.style.display === "flex") closeModal(); });

    // Render using the same grid class as Photos, but each tile is just floating text (no border/bg)
    function render(){
      grid.innerHTML = "";
      moments.forEach((m) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "moment-item"; // new class weâ€™ll add in styles.css
        btn.innerHTML = `
          <div class="moment-dt">
            <span class="moment-date">${m.date}</span>
            <span class="moment-time">${m.time}</span>
          </div>
        `;
        btn.addEventListener("click", () => openMoment(m));
        grid.appendChild(btn);
      });
    }

    render();
  </script>
</body>
</html>
