<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Moments</title>

  <link rel="stylesheet" href="css/styles.css?v=4">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
</head>
<body>

  <nav class="nav">
    <div class="brand">04/03/2026</div>
    <div class="links">
      <a href="index.html">Home</a>
      <a href="letters.html">Letters</a>
      <a href="game.html">Game</a>
      <a href="photos.html">Photos</a>
      <a class="active" href="moments.html">Moments</a>
    </div>
  </nav>

  <main class="page">
    <!-- Fullscreen scatter field -->
    <section class="moments-field" aria-label="Moments scattered">
      <h1 class="moments-title">Moments</h1>
      <div id="momentsLayer" class="moments-layer"></div>
      <div class="moments-hint">Click a time.</div>
    </section>
  </main>

  <!-- Modal (reuses your modal styling in styles.css) -->
  <div class="modal-backdrop" id="backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="top">
        <h2 id="modalTitle"></h2>
        <button class="btn" id="closeBtn" type="button">Close</button>
      </div>
      <div id="modalExtra" style="margin-top:12px;"></div>
      <p id="modalBody"></p>
    </div>
  </div>

  <script>
    // Put photos in /assets/photos/ and set photo filename if you want one.
    // x and y are positions in vw/vh. Edit these to move items around.
    const moments = [
      { date:"18/02/2026", time:"9:14am", title:"Vamino", text:"We had our breakfast and drunk your favourite soy milk.\nEnjoying your 'cold one'", photo:"", x:14, y:30 },
      { date:"18/11/2025", time:"1:41pm", title:"Drone flight", text:"You flew your drone over the Busselton Jetty.\nWe both watched it's view from the screen on your phone and you touched my leg.", photo:"", x:58, y:28 },
      { date:"20/11/2025", time:"12:37pm", title:"Elephant rocks", text:"We stepped around elephant rocks taking in the grandness of the sea.", photo:"", x:76, y:18 },
      { date:"08/12/2025", time:"5:40pm", title:"Coles", text:"We walked through coles looking for ingredients for me to make Tiramisu.\nThose 12 shots of coffee were paid for later.", photo:"", x:32, y:58 },
      { date:"18/12/2025", time:"5:22pm", title:"Southbank", text:"Stomach full of subway.\nWe sat on the grass at southbank next to the river and you stuck two toothpicks in your mouth pretending to be a walrus.", photo:"", x:8, y:72 },
      { date:"12/12/2025", time:"11:30pm", title:"Graduation", text:"You came to see me at my graduation to give me flowers. Seeing you was my favourite", photo:"", x:66, y:64 },
      { date:"29/12/2025", time:"4:42pm", title:"Rainbow Bay", text:"You took me to the beach. We had Hwachae and draw sand hearts on each other's hands.", photo:"", x:45, y:42 },
      { date:"12/07/2024", time:"4:55pm", title:"Storm", text:"The air changed and you looked calm anyway.", photo:"", x:85, y:74 },
      { date:"30/07/2024", time:"10:31pm", title:"Voice note", text:"I replayed it.\nThen again.", photo:"", x:22, y:16 },
      { date:"16/08/2024", time:"2:18pm", title:"Bookstore", text:"You held a book like it was a secret.", photo:"", x:50, y:78 },

      { date:"01/09/2024", time:"8:40pm", title:"Dinner", text:"You tasted as you cooked.\nTap tap tap with the spoon.", photo:"", x:12, y:50 },
      { date:"14/09/2024", time:"6:26am", title:"Morning", text:"Sleepy faces.\nSoftest version of the world.", photo:"", x:70, y:46 },
      { date:"27/09/2024", time:"9:11pm", title:"Inside joke", text:"We couldnâ€™t stop.\nEvery time we tried, we started again.", photo:"", x:90, y:36 },
      { date:"10/10/2024", time:"5:33pm", title:"Hands", text:"Your hands moved like you knew exactly what you were doing.", photo:"", x:36, y:86 },
      { date:"22/10/2024", time:"12:02pm", title:"Text", text:"One sentence.\nIt changed the whole day.", photo:"", x:60, y:12 },
      { date:"05/11/2024", time:"7:09pm", title:"Bus ride", text:"Your head on my shoulder.\nThe city went past.", photo:"", x:5, y:24 },
      { date:"18/11/2024", time:"3:50pm", title:"Sunset", text:"That colour on your face.\nI wanted to keep it.", photo:"", x:78, y:56 },
      { date:"02/12/2024", time:"1:21am", title:"Late talk", text:"We said the honest things.\nNo performance.", photo:"", x:52, y:30 },
      { date:"15/12/2024", time:"4:14pm", title:"Market", text:"You stopped for small beautiful things.", photo:"", x:26, y:70 },
      { date:"31/12/2024", time:"11:59pm", title:"New year", text:"Your eyes first.\nThen fireworks.", photo:"", x:64, y:84 },

      { date:"??/??/????", time:"??:??", title:"Future", text:"Future memory loading.", photo:"", x:86, y:8 }
    ];

    const layer = document.getElementById("momentsLayer");
    const backdrop = document.getElementById("backdrop");
    const closeBtn = document.getElementById("closeBtn");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const modalExtra = document.getElementById("modalExtra");

    function openMoment(m){
      modalTitle.textContent = m.title || "Moment";
      modalBody.textContent = m.text || "";

      modalExtra.innerHTML = "";
      if (m.photo){
        const img = document.createElement("img");
        img.src = `assets/photos/${m.photo}`;
        img.alt = m.title || "Photo";
        img.style.width = "100%";
        img.style.borderRadius = "14px";
        img.style.display = "block";
        img.onerror = () => {
          modalExtra.innerHTML = `<p style="margin:0;color:var(--muted);">Photo not found: assets/photos/${m.photo}</p>`;
        };
        modalExtra.appendChild(img);
      }

      backdrop.style.display = "flex";
      document.body.style.overflow = "hidden";
      closeBtn.focus();
    }

    function closeModal(){
      backdrop.style.display = "none";
      document.body.style.overflow = "";
    }

    closeBtn.addEventListener("click", closeModal);
    backdrop.addEventListener("click", (e) => { if (e.target === backdrop) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape" && backdrop.style.display === "flex") closeModal(); });

    function render(){
      layer.innerHTML = "";
      moments.forEach((m) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "moment-float";
        btn.style.left = (m.x ?? 50) + "vw";
        btn.style.top  = (m.y ?? 50) + "vh";

        btn.innerHTML = `
          <span class="mf-date">${m.date}</span>
          <span class="mf-time">${m.time}</span>
        `;

        btn.addEventListener("click", () => openMoment(m));
        layer.appendChild(btn);
      });
    }

    render();
  </script>
</body>
</html>
